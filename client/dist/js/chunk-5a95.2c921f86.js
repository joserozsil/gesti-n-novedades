(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a95"],{"07a4":function(t,n,e){"use strict";e("f751");var a=e("2f62"),o=e("bc3a"),i=e.n(o),s=e("db49"),c=new a["a"].Store({state:{user:{},token:"",loading:!1},mutations:{setDataUser:function(t,n){Object.assign(t.user,n)},setToken:function(t,n){t.token=n},updateUser:function(t,n){t.user=n},setLoading:function(t,n){t.loading=n}},getters:{user:function(t){return t.user}},actions:{getUser:function(t){return t.commit("setLoading",!0),i.a.post("".concat(s["a"].API_URL,"/token"),{token:localStorage.getItem("token")},{headers:{authorization:localStorage.getItem("token")}}).then(function(n){t.commit("updateUser",n.data),t.commit("setLoading",!1)})}}});n["a"]=c},2621:function(t,n){n.f=Object.getOwnPropertySymbols},"45d4":function(t,n,e){"use strict";var a=e("89cd"),o=e.n(a);o.a},"52a7":function(t,n){n.f={}.propertyIsEnumerable},73334:function(t,n,e){"use strict";var a=e("0d58"),o=e("2621"),i=e("52a7"),s=e("4bf8"),c=e("626a"),r=Object.assign;t.exports=!r||e("79e5")(function(){var t={},n={},e=Symbol(),a="abcdefghijklmnopqrst";return t[e]=7,a.split("").forEach(function(t){n[t]=t}),7!=r({},t)[e]||Object.keys(r({},n)).join("")!=a})?function(t,n){var e=s(t),r=arguments.length,u=1,l=o.f,d=i.f;while(r>u){var p,f=c(arguments[u++]),g=l?a(f).concat(l(f)):a(f),b=g.length,m=0;while(b>m)d.call(f,p=g[m++])&&(e[p]=f[p])}return e}:r},"89cd":function(t,n,e){},"8b48":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"img-bg app flex-row align-items-center"},[e("div",{staticClass:"container"},[e("b-row",{staticClass:"justify-content-center"},[e("b-col",{attrs:{md:"8"}},[e("b-card-group",{staticClass:"card-signin"},[e("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[e("b-card-body",[e("b-form",[e("h1",[t._v("Iniciar Sesión")]),e("p",{staticClass:"text-muted"},[t._v("Iniciar sesión en el sistema")]),e("b-input-group",{staticClass:"mb-3"},[e("b-input-group-prepend",[e("b-input-group-text",[e("i",{staticClass:"icon-user"})])],1),e("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Usuario",autocomplete:"username email"},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.signIn(n):null}},model:{value:t.loginData.usuario,callback:function(n){t.$set(t.loginData,"usuario",n)},expression:"loginData.usuario"}})],1),e("b-input-group",{staticClass:"mb-4"},[e("b-input-group-prepend",[e("b-input-group-text",[e("i",{staticClass:"icon-lock"})])],1),e("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Contraseña",autocomplete:"current-password"},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.signIn(n):null}},model:{value:t.loginData.contraseña,callback:function(n){t.$set(t.loginData,"contraseña",n)},expression:"loginData.contraseña"}})],1),e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("b-button",{staticClass:"px-4",attrs:{variant:"primary"},on:{click:function(n){t.signIn()}}},[t._v("\n                        Iniciar Sesión\n                    ")])],1),e("b-col",{staticClass:"text-right",attrs:{cols:"6"}})],1)],1)],1)],1)],1)],1)],1)],1)])},o=[],i=(e("4917"),e("28a5"),e("ac6a"),e("cadf"),e("551c"),e("07a4")),s=e("db49"),c=e("1940"),r=e.n(c),u={name:"Login",data:function(){return{alertCount:0,ip:"",loginData:{usuario:"jrodriguez","contraseña":"Joseangel19$"}}},store:i["a"],mounted:function(){var t=this;this.getUserIP(function(n){t.ip=n}),console.log(Object({VUE_APP_API_URL:"https://cicpc-novedades.herokuapp.com/api/v1",VUE_APP_API_IMAGE:"https://cicpc-novedades.herokuapp.com/uploads",VUE_APP_API_REPORT:"http://localhost:8000/api",VUE_APP_RENDER_REPORT:"http://localhost:8000",NODE_ENV:"production",BASE_URL:"/"}))},methods:{signIn:function(){var t=this;axios.post(s["a"].API_URL+"/signin",this.loginData).then(function(n){200==n.status&&(localStorage.setItem("token",n.data.token),t.$store.commit("setDataUser",n.data.user),r()("¡Listo!","Bienvenido al sistema ".concat(n.data.user.nombre),"success"),t.$router.push({name:"Dashboard"}))}).catch(function(n){n.response?(r()("¡Atención!",n.response.data.message,"error"),t.alertCount++,t.alertCount>=2&&t.storeAlert()):r()("¡Atención!","No se ha podido establecer conexión con el servidor","error")})},storeAlert:function(){var t=this;axios.post(s["a"].API_URL+"/alerts",{ip:this.ip,usuario:this.loginData.usuario}).then(function(n){t.alertCount=0}).catch(function(t){console.error(t)})},getUserIP:function(t){var n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,e=new n({iceServers:[]}),a=function(){},o={},i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function s(n){o[n]||t(n),o[n]=!0}e.createDataChannel(""),e.createOffer().then(function(t){t.sdp.split("\n").forEach(function(t){t.indexOf("candidate")<0||t.match(i).forEach(s)}),e.setLocalDescription(t,a,a)}).catch(function(t){}),e.onicecandidate=function(t){t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(i)&&t.candidate.candidate.match(i).forEach(s)}}}},l=u,d=(e("45d4"),e("2877")),p=Object(d["a"])(l,a,o,!1,null,"15e1f3ea",null);n["default"]=p.exports},f751:function(t,n,e){var a=e("5ca1");a(a.S+a.F,"Object",{assign:e("73334")})}}]);
//# sourceMappingURL=chunk-5a95.2c921f86.js.map