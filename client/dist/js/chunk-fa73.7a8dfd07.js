(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa73"],{"07a4":function(t,n,a){"use strict";a("f751");var e=a("2f62"),o=a("bc3a"),i=a.n(o),s=a("db49"),r=new e["a"].Store({state:{user:{},token:"",loading:!1},mutations:{setDataUser:function(t,n){Object.assign(t.user,n)},setToken:function(t,n){t.token=n},updateUser:function(t,n){t.user=n},setLoading:function(t,n){t.loading=n}},getters:{user:function(t){return t.user}},actions:{getUser:function(t){return t.commit("setLoading",!0),i.a.post("".concat(s["a"].API_URL,"/token"),{token:localStorage.getItem("token")},{headers:{authorization:localStorage.getItem("token")}}).then(function(n){t.commit("updateUser",n.data),t.commit("setLoading",!1)})}}});n["a"]=r},"14a6":function(t,n,a){},2621:function(t,n){n.f=Object.getOwnPropertySymbols},"52a7":function(t,n){n.f={}.propertyIsEnumerable},73334:function(t,n,a){"use strict";var e=a("0d58"),o=a("2621"),i=a("52a7"),s=a("4bf8"),r=a("626a"),c=Object.assign;t.exports=!c||a("79e5")(function(){var t={},n={},a=Symbol(),e="abcdefghijklmnopqrst";return t[a]=7,e.split("").forEach(function(t){n[t]=t}),7!=c({},t)[a]||Object.keys(c({},n)).join("")!=e})?function(t,n){var a=s(t),c=arguments.length,u=1,l=o.f,d=i.f;while(c>u){var f,p=r(arguments[u++]),g=l?e(p).concat(l(p)):e(p),b=g.length,m=0;while(b>m)d.call(p,f=g[m++])&&(a[f]=p[f])}return a}:c},"8b48":function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"img-bg app flex-row align-items-center"},[a("div",{staticClass:"container"},[a("b-row",{staticClass:"justify-content-center"},[a("b-col",{attrs:{md:"8"}},[a("b-card-group",{staticClass:"card-signin"},[a("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[a("b-card-body",[a("b-form",[a("h1",[t._v("Iniciar Sesión")]),a("p",{staticClass:"text-muted"},[t._v("Iniciar sesión en el sistema")]),a("b-input-group",{staticClass:"mb-3"},[a("b-input-group-prepend",[a("b-input-group-text",[a("i",{staticClass:"icon-user"})])],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Usuario",autocomplete:"username email"},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.signIn(n):null}},model:{value:t.loginData.usuario,callback:function(n){t.$set(t.loginData,"usuario",n)},expression:"loginData.usuario"}})],1),a("b-input-group",{staticClass:"mb-4"},[a("b-input-group-prepend",[a("b-input-group-text",[a("i",{staticClass:"icon-lock"})])],1),a("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Contraseña",autocomplete:"current-password"},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.signIn(n):null}},model:{value:t.loginData.contraseña,callback:function(n){t.$set(t.loginData,"contraseña",n)},expression:"loginData.contraseña"}})],1),a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("b-button",{staticClass:"px-4",attrs:{variant:"primary"},on:{click:function(n){t.signIn()}}},[t._v("\n                        Iniciar Sesión\n                    ")])],1),a("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[a("b-button",{staticClass:"px-0",attrs:{variant:"link"},on:{click:function(n){t.goToForgot()}}},[t._v("\n                      ¿Ha olvidado su contraseña?\n                    ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)])},o=[],i=(a("4917"),a("28a5"),a("ac6a"),a("cadf"),a("551c"),a("07a4")),s=a("db49"),r=a("1940"),c=a.n(r),u={name:"Login",data:function(){return{alertCount:0,ip:"",loginData:{usuario:"jrodriguez","contraseña":"Joseangel19$"}}},store:i["a"],mounted:function(){var t=this;this.getUserIP(function(n){t.ip=n})},methods:{signIn:function(){var t=this;Event.$emit("loading"),axios.post(s["a"].API_URL+"/signin",this.loginData).then(function(n){200==n.status&&(Event.$emit("stopLoading"),localStorage.setItem("token",n.data.token),t.$store.commit("setDataUser",n.data.user),c()("¡Listo!","Bienvenido al sistema ".concat(n.data.user.nombre),"success"),t.$router.push({name:"Dashboard"}))}).catch(function(n){Event.$emit("stopLoading"),n.response?(c()("¡Atención!",n.response.data.message,"error"),t.alertCount++,t.alertCount>=2&&t.storeAlert()):c()("¡Atención!","No se ha podido establecer conexión con el servidor","error")})},storeAlert:function(){var t=this;axios.post(s["a"].API_URL+"/alerts",{ip:this.ip,usuario:this.loginData.usuario}).then(function(n){t.alertCount=0}).catch(function(t){console.error(t)})},goToForgot:function(){this.$router.push({name:"forgot"})},getUserIP:function(t){var n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=new n({iceServers:[]}),e=function(){},o={},i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function s(n){o[n]||t(n),o[n]=!0}a.createDataChannel(""),a.createOffer().then(function(t){t.sdp.split("\n").forEach(function(t){t.indexOf("candidate")<0||t.match(i).forEach(s)}),a.setLocalDescription(t,e,e)}).catch(function(t){}),a.onicecandidate=function(t){t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(i)&&t.candidate.candidate.match(i).forEach(s)}}}},l=u,d=(a("9f81"),a("2877")),f=Object(d["a"])(l,e,o,!1,null,"67828cc6",null);n["default"]=f.exports},"9f81":function(t,n,a){"use strict";var e=a("14a6"),o=a.n(e);o.a},f751:function(t,n,a){var e=a("5ca1");e(e.S+e.F,"Object",{assign:a("73334")})}}]);
//# sourceMappingURL=chunk-fa73.7a8dfd07.js.map