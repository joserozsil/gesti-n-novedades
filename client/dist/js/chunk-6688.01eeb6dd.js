(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6688"],{"44f0":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"animated fadeIn"},[e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("b-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("strong",[t._v("Detalles de Cronología")])]),e("b-row",[e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"CC-"+t.port.clise,label:"Clise","laber-for":"clise",horizontal:!1}},[e("b-form-input",{attrs:{disabled:"COMPLETADO"===t.receptionData.estado,type:"number",id:"clise"},model:{value:t.port.clise,callback:function(o){t.$set(t.port,"clise",o)},expression:"port.clise"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"K-18-0071-"+t.port.exp,label:"Exp","laber-for":"exp",horizontal:!1}},[e("b-form-input",{attrs:{disabled:"COMPLETADO"===t.receptionData.estado,type:"number",id:"exp"},model:{value:t.port.exp,callback:function(o){t.$set(t.port,"exp",o)},expression:"port.exp"}})],1)],1)],1),e("b-row",[e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: Armas Largas",label:"Tipo","laber-for":"tipo",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"tipo"},model:{value:t.port.tipo,callback:function(o){t.$set(t.port,"tipo",o)},expression:"port.tipo"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: Negro",label:"Color","laber-for":"color",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"color"},model:{value:t.port.color,callback:function(o){t.$set(t.port,"color",o)},expression:"port.color"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 9mm",label:"Calibre","laber-for":"calibre",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"calibre"},model:{value:t.port.calibre,callback:function(o){t.$set(t.port,"calibre",o)},expression:"port.calibre"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 20cm",label:"Longitud de Cañon:","laber-for":"longitud_cañon",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"longitud_cañon"},model:{value:t.port.longitud_cañon,callback:function(o){t.$set(t.port,"longitud_cañon",o)},expression:"port.longitud_cañon"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 367mm",label:"Dimensiones","laber-for":"dimensiones",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"dimensiones"},model:{value:t.port.dimensiones,callback:function(o){t.$set(t.port,"dimensiones",o)},expression:"port.dimensiones"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 1kg",label:"Peso","laber-for":"peso",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"peso"},model:{value:t.port.peso,callback:function(o){t.$set(t.port,"peso",o)},expression:"port.peso"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 1kg",label:"Peso Cargador","laber-for":"peso_cargador",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"peso_cargador"},model:{value:t.port.peso_cargador,callback:function(o){t.$set(t.port,"peso_cargador",o)},expression:"port.peso_cargador"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: Abierta",label:"Miras","laber-for":"miras",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"miras"},model:{value:t.port.miras,callback:function(o){t.$set(t.port,"miras",o)},expression:"port.miras"}})],1)],1)],1),e("b-row",[e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: 6 balas",label:"Capacidad Cargador","laber-for":"capacidad_cargador",horizontal:!1}},[e("b-form-input",{attrs:{type:"number",id:"capacidad_cargador"},model:{value:t.port.capacidad_cargador,callback:function(o){t.$set(t.port,"capacidad_cargador",o)},expression:"port.capacidad_cargador"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{description:"Ej: Automático",label:"Disparador","laber-for":"disparador",horizontal:!1}},[e("b-form-input",{attrs:{type:"text",id:"disparador"},model:{value:t.port.disparador,callback:function(o){t.$set(t.port,"disparador",o)},expression:"port.disparador"}})],1)],1)],1),e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("b-form-group",{attrs:{label:"Comentario","laber-for":"comentarios",horizontal:!1}},[e("b-form-textarea",{staticClass:"form-control",attrs:{rows:"5"},model:{value:t.port.comentarios,callback:function(o){t.$set(t.port,"comentarios",o)},expression:"port.comentarios"}})],1)],1)],1)],1),e("b-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("strong",[t._v("Imágenes")])]),e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("div",{staticClass:"wrapper"},[e("gallery",{attrs:{images:t.images,index:t.index},on:{close:function(o){t.index=null}}}),t._l(t.images,function(o,a){return e("div",{key:a,staticClass:"image",class:["image",t.index==a?"selected":""],style:{backgroundImage:"url("+o+")",width:"100%",height:"300px"},on:{click:function(o){t.index=a}}})})],2)])],1)],1),e("b-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("strong",[t._v("Datos de Recepción")])]),t.loading?t._e():e("b-row",[e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{label:"Tipo","laber-for":"tipo_recepcion",disabled:!0,horizontal:!1}},[e("b-form-input",{staticClass:"form-control",attrs:{disabled:"",value:t.receptionData.tipo_recepcion,type:"text",id:"clise"}})],1)],1),e("b-col",{attrs:{sm:"6"}},[e("b-form-group",{attrs:{label:"Funcionario",disabled:!0,horizontal:!1}},[e("b-form-input",{staticClass:"form-control",attrs:{disabled:"",value:t.receptionData.Usuario.nombre+" "+t.receptionData.Usuario.apellido,type:"text"}})],1)],1),e("b-col",{attrs:{sm:"12"}},[e("b-form-group",{attrs:{label:"Descripción","laber-for":"Descripción",disabled:!0,horizontal:!1}},[e("b-form-textarea",{staticClass:"form-control",attrs:{disabled:"",value:t.receptionData.descripcion,rows:"5"}})],1)],1)],1)],1),e("div",{staticClass:"form-actions padding"},[e("b-button",{staticClass:"mr",attrs:{type:"button",variant:"secondary"},on:{click:function(o){t.$router.go(-1)}}},[t._v("\n          Cancelar\n        ")]),t._v("\n        Estado: "+t._s(t.receptionData.estado)+"\n      ")],1)],1)],1)],1)},r=[],i=(e("7f7f"),e("f751"),e("ac6a"),e("28a5"),e("92c3")),s=e.n(i),n=(e("1e3f"),e("067c")),c=e.n(n),l=e("db49"),p=e("1940"),d=e.n(p),u=(e("07a4"),{components:{vueDropzone:s.a,gallery:c.a},data:function(){return{users:[],user:{},port:{},receptionData:{},images:[],index:null,isNew:!1,loading:!0,dropzoneOptions:{url:"".concat(l["a"].API_URL,"/pictures"),dictDefaultMessage:"CARGAR IMAGEN",headers:{authorization:localStorage.getItem("token")}}}},mounted:function(){var t=this;this.user=this.$store.getters.user,axios.defaults.headers.common["authorization"]=localStorage.getItem("token"),this.armExist().then(function(o){if(t.isEmpty(o.data.data))t.isNew=!0;else{t.isNew=!1;var e=o.data.data.clise.split("-")[1],a=o.data.data.exp.split("-")[3];t.port=o.data.data,t.port.clise=e,t.port.exp=a,t.port.Evidencium.Imagens.forEach(function(o){var e="".concat(l["a"].API_IMAGE,"/").concat(o.nombre_archivo);t.images.push(e)})}}),this.getUsers(),this.getEvidence()},methods:{armExist:function(){var t=this;return new Promise(function(o,e){axios.get("".concat(l["a"].API_URL,"/evidences/").concat(t.$route.params.id,"/arms")).then(function(t){o(t)})})},storeArm:function(){var t=this;Object.assign(this.port,{evidencia_id:this.$route.params.id}),Object.assign(this.port,{clise:"CC-".concat(this.port.clise)}),Object.assign(this.port,{exp:"K-18-0071-".concat(this.port.exp)}),axios.post("".concat(l["a"].API_URL,"/arms"),this.port).then(function(o){d()({title:"Item modificado exitosamente",text:"",icon:"success"}),t.$router.push({name:"chronologyList"})}).catch(function(t){"SequelizeDatabaseError"==t.response.data.name&&d()({title:"Atención",text:"Algo ha salido mal, intentelo nuevamente",icon:"error"}),t.response.data.message&&d()({title:"Atención",text:"".concat(t.response.data.message),icon:"error"}),t.response.data.errors.forEach(function(t){d()({title:"Atención",text:"".concat(t.message),icon:"error"})})})},updateArm:function(){var t=this;Object.assign(this.port,{clise:"CC-".concat(this.port.clise)}),Object.assign(this.port,{exp:"K-18-0071-".concat(this.port.exp)}),axios.put("".concat(l["a"].API_URL,"/arms/").concat(this.port.id),this.port).then(function(o){d()({title:"Retrato modificado exitosamente",text:"",icon:"success"}),t.$router.push({name:"chronologyList"})}).catch(function(t){"SequelizeDatabaseError"==t.response.data.name&&d()({title:"Atención",text:"Algo ha salido mal, intentelo nuevamente",icon:"error"}),t.response.data.message&&d()({title:"Atención",text:"".concat(t.response.data.message),icon:"error"}),t.response.data.errors.forEach(function(t){d()({title:"Atención",text:"".concat(t.message),icon:"error"})})})},getUsers:function(){var t=this;axios.get("".concat(l["a"].API_URL,"/users?limit=1")).then(function(o){axios.get("".concat(l["a"].API_URL,"/users?limit=").concat(o.total)).then(function(o){t.users=o.data.data})})},getEvidence:function(){var t=this;this.loading=!0,axios.get("".concat(l["a"].API_URL,"/evidences/").concat(this.$route.params.id)).then(function(o){t.receptionData=o.data.data,t.loading=!1})},isEmpty:function(t){for(var o in t)if(t.hasOwnProperty(o))return!1;return JSON.stringify(t)===JSON.stringify({})},sendingEvent:function(t,o,e){e.append("evidencia_id",this.$route.params.id),e.append("usuario_id",this.user.id)},reloadImages:function(t,o){this.images.push("".concat(l["a"].API_IMAGE,"/").concat(o.nombre_archivo))},onChangeStatus:function(){var t="COMPLETADO"==this.receptionData.estado?"EN_PROCESO":"COMPLETADO";return this.port.clise||"COMPLETADO"!=t?this.port.clise.length<5&&"COMPLETADO"==t?(d()({title:"Atención",text:"El campo clise debe contener 5 digitos",icon:"error"}),this.receptionData.estado="EN_PROCESO",""):this.port.clise.length>5&&"COMPLETADO"==t?(d()({title:"Atención",text:"El campo clise debe contener 5 digitos",icon:"error"}),this.receptionData.estado="EN_PROCESO",""):this.port.exp||"COMPLETADO"!=t?this.port.exp.length<6&&"COMPLETADO"==t?(d()({title:"Atención",text:"El campo exp debe contener 6 digitos",icon:"error"}),this.receptionData.estado="EN_PROCESO",""):this.port.exp.length>6&&"COMPLETADO"==t?(d()({title:"Atención",text:"El campo exp debe contener 6 digitos",icon:"error"}),this.receptionData.estado="EN_PROCESO",""):this.port.tipo||"COMPLETADO"!=t?this.images.length||"COMPLETADO"!=t?this.port.color||"COMPLETADO"!=t?this.port.calibre||"COMPLETADO"!=t?(this.receptionData.estado="COMPLETADO",void axios.put("".concat(l["a"].API_URL,"/evidences/").concat(this.receptionData.id),{estado:t}).then(function(o){console.log("Estado actualizado a ".concat(t))}).catch(function(t){})):(this.showError("calibre"),this.receptionData.estado="EN_PROCESO",""):(this.showError("color"),this.receptionData.estado="EN_PROCESO",""):(this.showError("Imagenes"),this.receptionData.estado="EN_PROCESO",""):(this.showError("Tipo"),this.receptionData.estado="EN_PROCESO",""):(this.showError("exp"),this.receptionData.estado="EN_PROCESO",""):(this.receptionData.estado="EN_PROCESO",this.showError("clise"),"")},showError:function(t){d()({title:"Atención",text:"El campo ".concat(t," es requerido"),icon:"error"})}}}),m=u,b=(e("e96d"),e("2877")),h=Object(b["a"])(m,a,r,!1,null,"7738a755",null);o["default"]=h.exports},"56fc":function(t,o,e){},e96d:function(t,o,e){"use strict";var a=e("56fc"),r=e.n(a);r.a}}]);
//# sourceMappingURL=chunk-6688.01eeb6dd.js.map