(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4742"],{"07a4":function(t,e,a){"use strict";a("f751");var n=a("2f62"),i=a("bc3a"),o=a.n(i),r=a("db49"),s=new n["a"].Store({state:{user:{},token:"",loading:!1},mutations:{setDataUser:function(t,e){Object.assign(t.user,e)},setToken:function(t,e){t.token=e},updateUser:function(t,e){t.user=e},setLoading:function(t,e){t.loading=e}},getters:{user:function(t){return t.user}},actions:{getUser:function(t){return t.commit("setLoading",!0),o.a.post("".concat(r["a"].API_URL,"/token"),{token:localStorage.getItem("token")},{headers:{authorization:localStorage.getItem("token")}}).then(function(e){t.commit("updateUser",e.data),t.commit("setLoading",!1)})}}});e["a"]=s},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2c90":function(t,e,a){},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"60e4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{staticClass:"ml-auto",attrs:{md:"4",sm:"12"}},[a("b-form-group",{attrs:{label:"Buscar por exp y clise","laber-for":"date",horizontal:!1}},[a("b-form-input",{attrs:{type:"text",placeholder:"Buscar exp y clise"},on:{change:function(e){t.search()}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)],1),a("b-col",{attrs:{cols:"12",xl:"12"}},[a("transition",{attrs:{name:"slide"}},[a("b-card",{attrs:{header:t.caption}},[a("b-table",{attrs:{responsive:"sm",hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage},scopedSlots:t._u([{key:"id",fn:function(e){return[a("strong",[t._v(t._s(e.item.id))])]}},{key:"retrato",fn:function(e){return[a("b-navbar",{attrs:{variant:"faded",type:"light"}},[a("b-navbar-brand",{attrs:{tag:"h1",href:"#"}},[a("img",{staticClass:"img-avatar d-inline-block align-top",attrs:{src:t.urlImage+"/"+e.item.Evidencium.Imagens[0].nombre_archivo,width:"40px",alt:"BV"}})])],1)]}},{key:"exp",fn:function(e){return[a("strong",[t._v(t._s(e.item.exp))])]}},{key:"dibujante",fn:function(e){return[e.item.Usuario?a("strong",[t._v("\n            "+t._s(e.item.Usuario.nombre)+" "+t._s(e.item.Usuario.apellido)+"\n          ")]):t._e()]}},{key:"fecha",fn:function(e){return[a("b-badge",[t._v(t._s(t._f("listDate")(e.item.f_creacion)))])]}},{key:"solicitud",fn:function(e){return[a("strong",[t._v(t._s(e.item.solicitado_por))])]}},{key:"acción",fn:function(e){return[a("b-button",{staticClass:"btn-pill",attrs:{variant:"primary"},on:{click:function(a){t.generateReport(e.item.id)}}},[t._v("Reporte")]),a("b-button",{staticClass:"btn-pill",attrs:{variant:"primary"},on:{click:function(a){t.goToDetail(e.item.evidencia_id)}}},[t._v("Detalles")]),t.isEnabled(e.item.f_creacion)?a("b-button",{staticClass:"btn-pill",attrs:{variant:"success"},on:{click:function(a){t.goToEdit(e.item.evidencia_id)}}},[t._v("Actualizar")]):t._e()]}}])}),a("nav",[a("b-pagination",{attrs:{size:"sm","total-rows":t.getRowCount(t.items),"per-page":t.perPage,"prev-text":"Prev","next-text":"Next","hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1)],1)},i=[],o=(a("f751"),a("db49")),r=(a("1940"),a("07a4"),a("c1df")),s=a.n(r),c={name:"Usuarios",props:{caption:{type:String,default:"Lista de Retratos Realizados"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},data:function(){return{items:[],fields:[{key:"id"},{key:"retrato"},{key:"exp"},{key:"dibujante"},{key:"fecha"},{key:"solicitud"},{key:"acción"}],currentPage:1,perPage:15,totalRows:0,urlImage:o["a"].API_IMAGE,query:""}},computed:{},mounted:function(){axios.defaults.headers.common["authorization"]=localStorage.getItem("token"),this.getActs()},methods:{getRowCount:function(t){return t.length},getActs:function(){var t=this;axios.get("".concat(o["a"].API_URL,"/portraits?limit=1")).then(function(e){axios.get("".concat(o["a"].API_URL,"/portraits?limit=").concat(e.data.total)).then(function(e){t.items=e.data.data.filter(function(t){return"COMPLETADO"==t.Evidencium.estado})})})},generateReport:function(t){var e=this.items.filter(function(e){return e.id==t})[0],a=o["a"].API_IMAGE+"/"+e.Evidencium.Imagens[0].nombre_archivo;Object.assign(e,{image:a}),axios.post("".concat(o["a"].API_REPORT,"/portraits"),{data:e}).then(function(t){window.open(o["a"].RENDER_REPORT+"/"+t.data,"_blank")})},goToEdit:function(t){this.$router.push({name:"editAct",params:{id:t}})},goToDetail:function(t){this.$router.push({name:"detailAct",params:{id:t}})},isEnabled:function(t){var e=s()(t).add(1,"day").unix()<s()().unix();return!0!==e},search:function(){var t=this;this.query.length>2?axios.post("".concat(o["a"].API_URL,"/search/portraits"),{quering:this.query}).then(function(e){t.items=e.data.data}):this.getActs()}}},u=c,l=(a("9d23"),a("2877")),d=Object(l["a"])(u,n,i,!1,null,"923a9008",null);e["default"]=d.exports},73334:function(t,e,a){"use strict";var n=a("0d58"),i=a("2621"),o=a("52a7"),r=a("4bf8"),s=a("626a"),c=Object.assign;t.exports=!c||a("79e5")(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[a]||Object.keys(c({},e)).join("")!=n})?function(t,e){var a=r(t),c=arguments.length,u=1,l=i.f,d=o.f;while(c>u){var f,p=s(arguments[u++]),m=l?n(p).concat(l(p)):n(p),g=m.length,b=0;while(g>b)d.call(p,f=m[b++])&&(a[f]=p[f])}return a}:c},"9d23":function(t,e,a){"use strict";var n=a("2c90"),i=a.n(n);i.a},f751:function(t,e,a){var n=a("5ca1");n(n.S+n.F,"Object",{assign:a("73334")})}}]);
//# sourceMappingURL=chunk-4742.e240c029.js.map